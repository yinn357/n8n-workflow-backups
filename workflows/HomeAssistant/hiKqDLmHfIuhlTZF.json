{
  "active": false,
  "connections": {
    "HAè·å–å˜é‡è®°å½•": {
      "main": [
        [
          {
            "node": "è·å–è®°å½•",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–è®°å½•": {
      "main": [
        [
          {
            "node": "toMarkdownå†…å®¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-09-10T02:40:31.554Z",
  "id": "hiKqDLmHfIuhlTZF",
  "isArchived": false,
  "meta": null,
  "name": "sub-è·å–å˜é‡è®°å½•",
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "size",
              "type": "number"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -256,
        -80
      ],
      "id": "8739b0a6-dd4f-465c-a683-8a1bdfd8cbf7",
      "name": "HAè·å–å˜é‡è®°å½•"
    },
    {
      "parameters": {
        "jsCode": "// åè½¬æ•°ç»„\n$input.all().reverse()\n/**\n * å°†æ•°æ®æ•°ç»„è½¬æ¢æˆ Markdown Table æ ¼å¼\n */\nfunction toMarkdownTable(jsonArray, ignoreFields = []) {\n  const headers = Object.keys(jsonArray[0].json).filter(h => !ignoreFields.includes(h));\n  const headerRow = '| ' + headers.join(' | ') + ' |';\n  const separatorRow = '| ' + headers.map(() => '---').join(' | ') + ' |';\n\n  const dataRows = jsonArray.map(obj =>\n    '| ' + headers.map(h => String(obj.json[h]).replace(/\\|/g, '\\\\|')).join(' | ') + ' |'\n  );\n\n  return [headerRow, separatorRow, ...dataRows].join('\\n');\n}\nconst ignoreFields = ['æºæ•°æ®', '_id', 'id', 'keys'];\nlet tableMd = toMarkdownTable($input.all(), ignoreFields);\n\n/**\n * å°†æ•°æ®æ•°ç»„è½¬æ¢æˆ Markdown å½¢å¼ï¼š\n * ### HH:MM\n * - äºº: x    ç¯: y    å™¨: z\n */\nfunction toSimpleMd(data) {\n  return data.map(item => {\n    const json = item.json\n    // æˆªå–æ—¶é—´ä¸­çš„æ—¶:åˆ†\n    const hhmm = json['æ—¶é—´']?.slice(11, 16);\n    const people = json['æœ‰äºº'];\n    const lamps  = json['ç¯å…‰æ•°é‡'];\n    const devices= json['å®¶ç”µæ•°é‡'];\n    const light= json['å…‰ç…§åº¦'].toFixed(2);\n    const lightAvg= json['å¹³å‡å…‰ç…§åº¦'];\n    // return `### ${hhmm}\\n- äºº: ${people}\\tç¯: ${lamps}\\tå™¨: ${devices}`;\n    return `- ğŸ•¦${hhmm} ğŸ§â€${people} ğŸ’¡${lamps} ğŸ”Œ${devices} ğŸ”†â€${lightAvg}/â€${light}`;Â  \n    \n  }).join('\\n');\n}\n\nlet listMd = toSimpleMd($input.all());\nreturn [{\n  json:{tableMd,listMd}\n}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        192,
        -80
      ],
      "id": "a38ccc0b-f92d-4d35-bf2a-23b163ebb8d3",
      "name": "toMarkdownå†…å®¹"
    },
    {
      "parameters": {
        "db_path": "/files/database/home-assistant.db",
        "query_type": "SELECT",
        "query": "=SELECT * FROM global_variables order by `æ—¶é—´` desc limit {{ $json.size }}",
        "spread": true
      },
      "type": "n8n-nodes-sqlite3.sqliteNode",
      "typeVersion": 1,
      "position": [
        -16,
        -80
      ],
      "id": "ddeaddc8-f70a-4510-a66f-7cb883bd5574",
      "name": "è·å–è®°å½•"
    }
  ],
  "pinData": {
    "HAè·å–å˜é‡è®°å½•": [
      {
        "json": {
          "size": 3
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-09-10T02:40:31.574Z",
      "updatedAt": "2025-09-10T02:40:31.574Z",
      "role": "workflow:owner",
      "workflowId": "hiKqDLmHfIuhlTZF",
      "projectId": "BeX3bor8ts20lbDK"
    }
  ],
  "staticData": null,
  "tags": [
    {
      "createdAt": "2025-06-26T06:14:33.448Z",
      "updatedAt": "2025-09-10T02:08:30.393Z",
      "id": "FHV017iDd8qf8jAL",
      "name": "HomeAssistant"
    },
    {
      "createdAt": "2025-07-11T02:54:27.831Z",
      "updatedAt": "2025-07-11T03:55:43.484Z",
      "id": "JqrpOsXNCY5fMnlD",
      "name": "Common"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2025-09-10T06:16:25.000Z",
  "versionId": "2f28ba3d-eabe-47a5-96fe-91dbdc75a770"
}